<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <h2>í˜¸ê·¸ì™€íŠ¸ ë§ˆë²• ë„ì„œê´€ ì¶œì… ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
        ë§ˆë²•ì‚¬ ì´ë¦„ ì…ë ¥: <input type="text" v-model="name"><button @click="enter" :disabled="enterCount>=5">ì¶œì… ê¸°ë¡ ì¶”ê°€</button>
        <br>
        <span style="color:red">{{warn}}</span>
        <h3>í˜„ì¬ ë„ì„œê´€ ì¶œì… ì¤‘ (ìµœê·¼ ìˆœ):</h3>
        <ul>
            <li v-for="(wizard, index) in names">{{index+1}}. {{wizard}} <button @click="exit(index)">í‡´ì¥</button></li>
        </ul>
        <h3>ì¶œì… íšŸìˆ˜ í†µê³„: </h3>
        <ul>
            <li v-for="wizard in enteredWizards">{{wizard.name}}: {{wizard.count}}íšŒ ì¶œì… </li>
        </ul>
        <br>
        <span>{{mostFrequentWizard}}</span>
    </div>
    <script src="https://unpkg.com/vue"></script>
    <script>
        let vm = Vue.createApp({
            name:'App',
            data(){
                return {
                    name:'',
                    enterCount:0,
                    enteredWizards:[],
                    names:[],
                    warn:'',
                }
            },
            watch:{
                enterCount(current, old){
                    if(current >= 5){
                    this.warn="âš  í˜„ì¬ ë„ì„œê´€ ì¸ì› í¬í™” ìƒíƒœì…ë‹ˆë‹¤! ë” ì´ìƒ ì¶œì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; 
                    }else{
                        this.warn="";
                    }
         
                }
            },
            computed:{
                mostFrequentWizard(){
                    if(this.enteredWizards.length>=1){
                        let most = this.enteredWizards[0]
                    for(wizard of this.enteredWizards){
                        if(most.count<wizard.count){
                            most = wizard;
                        }
                    }
                    return `ê°€ì¥ ë§ì´ ì¶œì…í•œ ë§ˆë²•ì‚¬: ${most.name} (${most.count}íšŒ)`;
        
                    }else{
                        return "";
                    }
             }
            },
            methods:{
                enter(){              
                    if(this.names.includes(this.name)){
                        console.error(`${this.name}ë‹˜ì€ ì´ë¯¸ ì¶œì…í•˜ì…¨ìŠµë‹ˆë‹¤.`);
                       // alert(`${this.name}ë‹˜ì€ ì´ë¯¸ ì¶œì…í•˜ì…¨ìŠµë‹ˆë‹¤.`);
                    }else{
                        this.enterCount++;
                        this.names.unshift(this.name);
                        let existingWizard  = this.enteredWizards.findIndex((wizard) => {
                            return wizard.name === this.name;
                        })
                        if(existingWizard != -1){
                            this.enteredWizards[existingWizard].count++;
                        }
                        else{
                            this.enteredWizards.unshift({name:this.name, count:1});
                        }
                    }
                },
                exit(index){
                    this.enterCount--;
                    this.names.splice(index,1);
                }
            },
            created(){
                console.log("ğŸ“š ë„ì„œê´€ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°€ë™!");
            },
            mounted(){
                console.log("âœ… ë„ì„œê´€ ì¤€ë¹„ ì™„ë£Œ!");
            }
        }).mount("#app");
    </script>
</body>
</html>